(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{121:function(e,t,n){e.exports={friend:"Friend_friend__15Egg"}},128:function(e,t,n){e.exports={main:"Main_main__1RAdE"}},129:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__3jdV8"}},130:function(e,t,n){e.exports={myPost:"MyPost_myPost__mKekF"}},131:function(e,t,n){e.exports={post:"Post_post__1v5TQ"}},132:function(e,t,n){e.exports={container:"ProfileUser_container__4bBi9"}},22:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__2ZgTh",dialogsItems:"Dialogs_dialogsItems__18rH7",dialog:"Dialogs_dialog__167am",messages:"Dialogs_messages__3KGwr",message:"Dialogs_message__ikqW3",container:"Dialogs_container__2BGfP"}},23:function(e,t,n){e.exports={page:"Nav_page__20Au5",ul:"Nav_ul__2jdjV",active:"Nav_active__21PEU"}},28:function(e,t,n){e.exports={users:"Users_users__3xpyk",card:"Users_card__nM6Nt",selectedPage:"Users_selectedPage__mXIiO",paginate:"Users_paginate__3KJAK",paginateLi:"Users_paginateLi__1PauA",paginateLiActive:"Users_paginateLiActive__ap730",paginateLiPrevious:"Users_paginateLiPrevious__2wKWl",paginateLiNext:"Users_paginateLiNext__5rnzF"}},284:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(59),i=n.n(r),c=n(23),o=n.n(c),u=n(11),l=n(121),j=n.n(l),d=n(0);function b(e){var t=e.avatar,n=e.name;return Object(d.jsxs)("div",{className:j.a.friend,children:[Object(d.jsx)("img",{alt:"avatar",width:"30px",src:t}),Object(d.jsx)("p",{children:n})]})}var g=n(8),O=n(37),f=n(5),h="SEND-MESSAGE",p={dialogsData:[{id:1,name:"Bob"},{id:2,name:"Alex"},{id:3,name:"Lili"},{id:4,name:"Smitty"},{id:5,name:"Nic"}],messageData:[{id:1,message:"Hi!"},{id:2,message:"How are you"},{id:3,message:"Thanks"},{id:4,message:"i am fine"},{id:5,message:"Yo"}]},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:var n=t.newMessageBody;return Object(f.a)(Object(f.a)({},e),{},{messageData:[].concat(Object(O.a)(e.messageData),[{id:6,message:n}])});default:return e}},x=n(122).create({withCredentials:!0,headers:{"API-KEY":"738a7b98-0701-4aab-b063-c2ec324fb243"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),v=function(e,t){return x.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},_=function(){return x.get("auth/me").then((function(e){return e.data}))},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return x.post("auth/login",{email:e,password:t,rememberMe:n})},w=function(){return x.delete("auth/login")},S=function(e){return x.post("follow/".concat(e),{}).then((function(e){return e.data}))},N=function(e){return x.delete("follow/".concat(e)).then((function(e){return e.data}))},C=function(e){return x.get("profile/".concat(e))},y=function(e){return x.get("profile/status/".concat(e))},A=function(e){return x.put("profile/status",{status:e})},U="ADD-POST",k="SET_USER_PROFILE",E="SET_STATUS",I={postData:[{id:1,message:"Hi"},{id:2,message:"Hello"},{id:3,message:"Thanks"},{id:4,message:"Yo"}],newPostText:"React",profile:null,status:""},L=function(e){return{type:E,status:e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:var n={id:5,message:t.newPostText};return Object(f.a)(Object(f.a)({},t),{},{postData:[].concat(Object(O.a)(e.postData),[n])});case k:return Object(f.a)(Object(f.a)({},e),{},{profile:t.profile});case E:return Object(f.a)(Object(f.a)({},e),{},{status:t.status});default:return e}},M={},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return e},D={friends:[{id:1,name:"Bob",avatar:"https://i.pinimg.com/736x/c2/74/aa/c274aa153d376a2365b66af27521d203.jpg"},{id:2,name:"Nick",avatar:"https://cspromogame.ru//storage/upload_images/avatars/3981.jpg"},{id:3,name:"Lili",avatar:"https://omoro.ru/wp-content/uploads/2018/05/prikilnie-kartinki-na-avatarky-dlia-devyshek-48.jpg"}]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;return e},R="FOLLOW",z="UN_FOLLOW",H="SET_USERS",G="SET_CURRENT_PAGE",K="SET_TOTAL_USERS_COUNT",W="TOGGLE_IS_FETCHING",q="TOGGLE_IS_FOLLOWING_PROGRESS",J={users:[],pageSize:12,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:!1},V=function(e){return{type:W,isFetching:e}},X=function(e){return{type:q,isFetching:e}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(f.a)(Object(f.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(f.a)(Object(f.a)({},e),{},{followed:!0}):e}))});case z:return Object(f.a)(Object(f.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(f.a)(Object(f.a)({},e),{},{followed:!1}):e}))});case H:return Object(f.a)(Object(f.a)({},e),{},{users:Object(O.a)(t.users)});case G:return Object(f.a)(Object(f.a)({},e),{},{currentPage:t.currentPage});case K:return Object(f.a)(Object(f.a)({},e),{},{totalUsersCount:t.totalUsersCount});case W:return Object(f.a)(Object(f.a)({},e),{},{isFetching:t.isFetching});case q:return Object(f.a)(Object(f.a)({},e),{},{followingInProgress:t.isFetching});default:return e}},Z=n(33),Q="SET_USER_DATA",$={userId:null,email:null,login:null,isAuth:!1},ee=function(e,t,n,a){return{type:Q,payload:{userId:e,email:t,login:n,isAuth:a}}},te=function(){return function(e){_().then((function(t){if(console.log(t),0===t.resultCode){var n=t.data,a=n.id,s=n.login,r=n.email;e(ee(a,r,s,!0))}}))}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(f.a)(Object(f.a)({},e),t.payload);default:return e}},ae=n(124),se=n(120),re=Object(g.c)({messagePage:m,mainPage:F,sideBar:T,nav:B,usersPage:Y,auth:ne,form:se.a}),ie=Object(g.e)(re,Object(g.a)(ae.a));window.store=ie;var ce=ie;function oe(){var e=ce.getState().nav.friends.map((function(e){return Object(d.jsx)("div",{children:Object(d.jsx)(b,{avatar:e.avatar,name:e.name})},e.id)}));return Object(d.jsx)("div",{children:e})}function ue(){return Object(d.jsxs)("div",{className:o.a.page,children:[Object(d.jsxs)("ul",{className:o.a.ul,children:[Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{activeClassName:o.a.active,to:"/profile",children:"Profile"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{activeClassName:o.a.active,to:"/dialogs",children:"Messages"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{activeClassName:o.a.active,to:"/news",children:"News"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{activeClassName:o.a.active,to:"/music",children:"Music"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{activeClassName:o.a.active,to:"/settings",children:"Settings"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{activeClassName:o.a.active,to:"/users",children:"Users"})})]}),Object(d.jsx)(oe,{})]})}var le=n(83),je=n.n(le),de=n(10);function be(){return Object(d.jsx)("div",{children:"News"})}function ge(){return Object(d.jsx)("div",{children:"Music"})}function Oe(){return Object(d.jsx)("div",{children:"Settings"})}var fe=n(22),he=n.n(fe);function pe(e){return Object(d.jsx)("div",{className:he.a.dialog,children:Object(d.jsx)(u.b,{to:"/dialogs/"+e.id,children:e.name})})}function me(e){return Object(d.jsx)("div",{className:he.a.message,children:e.message})}var xe=n(107),ve=n(118),_e=n(119),Pe=n(65),we=n(46),Se=n.n(we),Ne=["input","meta"],Ce=["input"],ye=["input"],Ae=function(e){e.input;var t=e.meta,n=Object(Pe.a)(e,Ne),a=t.touched&&t.error;return Object(d.jsxs)("div",{className:Se.a.formControl+" "+(a&&Se.a.error),children:[Object(d.jsx)("div",{children:n.children}),a&&Object(d.jsx)("span",{children:t.error})]})},Ue=function(e){var t=e.input,n=Object(Pe.a)(e,Ce);return Object(d.jsx)(Ae,Object(f.a)(Object(f.a)({},e),{},{children:Object(d.jsx)("textarea",Object(f.a)(Object(f.a)({},t),n))}))},ke=function(e){var t=e.input,n=Object(Pe.a)(e,ye);return Object(d.jsx)(Ae,Object(f.a)(Object(f.a)({},e),{},{children:Object(d.jsx)("input",Object(f.a)(Object(f.a)({},t),n))}))},Ee=function(e){if(!e)return"Field is required"},Ie=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbol")}},Le=Ie(20),Fe=Object(_e.a)({form:"addMessage"})((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h4",{children:"Message"}),Object(d.jsxs)(xe.a,{onSubmit:e.handleSubmit,children:[Object(d.jsx)("div",{children:Object(d.jsx)(ve.a,{name:"addMessage",component:Ue,placeholder:"New Message",validate:[Ee,Le]})}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{children:"Add message"})})]})]})}));var Me=n(9),Te=function(e){return{isAuth:e.auth.isAuth}},De=function(e){return Object(Me.b)(Te)((function(t){return t.isAuth?Object(d.jsx)(e,Object(f.a)({},t)):Object(d.jsx)(de.a,{to:"/login"})}))},Be=Object(g.d)(Object(Me.b)((function(e){return{state:e}}),(function(e){return{onSendMessageClick:function(t){e(function(e){return{type:h,newMessageBody:e}}(t))}}})),De)((function(e){var t=e.state.messagePage.dialogsData.map((function(e){return Object(d.jsx)(pe,{name:e.name,id:e.id},e.id)})),n=e.state.messagePage.messageData.map((function(e){return Object(d.jsx)(me,{message:e.message,id:e.id},e.id)}));return e.isAuth?Object(d.jsxs)("div",{className:he.a.container,children:[Object(d.jsxs)("div",{className:he.a.dialogs,children:[Object(d.jsx)("div",{className:he.a.dialogsItems,children:t}),Object(d.jsx)("div",{className:he.a.messages,children:n})]}),Object(d.jsx)(Fe,{onSubmit:function(t){e.onSendMessageClick(t.addMessage)}})]}):Object(d.jsx)(de.a,{to:"/login"})})),Re=n(28),ze=n.n(Re),He=n(127),Ge=n.n(He),Ke=function(e){var t=Math.ceil(e.totalUsersCount/e.pageSize);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:ze.a.users,children:e.users.map((function(t){return Object(d.jsxs)("div",{className:ze.a.card,children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("div",{children:Object(d.jsx)(u.b,{to:"/profile/"+t.id,children:Object(d.jsx)("img",{width:"70px",alt:"image",src:null!=t.photos.small?t.photos.small:"https://klike.net/uploads/posts/2019-03/1551511801_1.jpg"})})}),Object(d.jsx)("div",{children:t.followed?Object(d.jsx)("button",{disabled:e.followingInProgress,onClick:function(){e.unFollow(t.id)},children:"Unfollow"}):Object(d.jsx)("button",{disabled:e.followingInProgress,onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(d.jsxs)("span",{children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("div",{children:t.name}),Object(d.jsx)("div",{children:t.status}),Object(d.jsx)("div",{children:t.id})]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("div",{children:"el.location.country"}),Object(d.jsx)("div",{children:"el.location.city"})]})]})]},t.id)}))}),Object(d.jsx)(Ge.a,{breakLabel:"...",nextLabel:">",onPageChange:function(t){var n=t.selected;e.onPageChange(n+1)},pageRangeDisplayed:5,pageCount:t,previousLabel:"<",renderOnZeroPageCount:null,containerClassName:ze.a.paginate,pageClassName:ze.a.paginateLi,activeClassName:ze.a.paginateLiActive,previousClassName:ze.a.paginateLiPrevious,nextClassName:ze.a.paginateLiNext})]})},We=n.p+"static/media/loading.a1a99674.gif",qe=n(86),Je=n.n(qe),Ve=function(){return Object(d.jsx)("div",{className:Je.a.container,children:Object(d.jsx)("img",{className:Je.a.preloader,src:We,alt:"preloader"})})},Xe=Object(g.d)(De,Object(Me.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:function(e){return function(t){t(X(!0)),S(e).then((function(n){0===n.resultCode&&t(function(e){return{type:R,userId:e}}(e)),t(X(!1))}))}},unFollow:function(e){return function(t){t(X(!0)),N(e).then((function(n){0===n.resultCode&&t(function(e){return{type:z,userId:e}}(e)),t(X(!1))}))}},setCurrentPage:function(e){return{type:G,currentPage:e}},toggleIsFollowingProgress:X,getUsers:function(e,t){return function(n){n(V(!0)),v(e,t).then((function(e){var t,a;n(V(!1)),n((t=e.items,{type:H,users:t})),n((a=e.totalCount,{type:K,totalUsersCount:a}))}))}}}))((function(e){Object(a.useEffect)((function(){e.getUsers(e.currentPage,e.pageSize)}),[]);return Object(d.jsxs)(d.Fragment,{children:[e.isFetching?Object(d.jsx)(Ve,{}):null,Object(d.jsx)(Ke,{users:e.users,unFollow:e.unFollow,follow:e.follow,totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,onPageChange:function(t){e.getUsers(t,e.pageSize)},currentPage:e.currentPage,followingInProgress:e.followingInProgress})]})})),Ye=n(128),Ze=n.n(Ye),Qe=n(129),$e=n.n(Qe),et=Ie(10),tt=Object(_e.a)({form:"newMessage"})((function(e){return Object(d.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(d.jsx)("div",{children:Object(d.jsx)(ve.a,{name:"newMessage",component:Ue,placeholder:"New Post",validate:[Ee,et]})}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{children:"Add post"})})]})}));var nt=Object(Me.b)((function(e){return{newPostText:e.mainPage.newPostText}}),(function(e){return{onAddPost:function(t){e(function(e){return{type:U,newPostText:e}}(t))}}}))((function(e){return Object(d.jsxs)("div",{className:$e.a.descriptionBlock,children:[Object(d.jsx)("h3",{children:"My post"}),Object(d.jsx)(tt,{onSubmit:function(t){e.onAddPost(t.newMessage)}})]})})),at=n(130),st=n.n(at),rt=n(131),it=n.n(rt);function ct(e){return Object(d.jsxs)("div",{className:it.a.post,children:[Object(d.jsx)("img",{alt:"avatar",src:"https://klike.net/uploads/posts/2019-03/1551511801_1.jpg"}),e.message]})}var ot=Object(Me.b)((function(e){return{postData:e.mainPage.postData}}))((function(e){var t=e.postData.map((function(e){return Object(d.jsx)(ct,{message:e.message},e.id)}));return Object(d.jsx)("div",{className:st.a.myPost,children:t})})),ut=n(132),lt=n.n(ut),jt=n(87),dt=function(e){var t=Object(a.useState)(!0),n=Object(jt.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(""),c=Object(jt.a)(i,2),o=c[0],u=c[1];Object(a.useEffect)((function(){u(e.status)}),[e.status]);return Object(d.jsx)("div",{children:s?Object(d.jsx)("span",{onDoubleClick:function(){r(!1)},children:e.status}):Object(d.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!0),e.updateStatus(o)},value:o})})},bt=function(e){return e.profile?Object(d.jsxs)("div",{className:lt.a.container,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("img",{src:e.profile.photos.large}),Object(d.jsx)(dt,{status:e.status,updateStatus:e.updateStatus})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Name -- ".concat(e.profile.fullName)}),Object(d.jsx)("p",{children:"About Me -- ".concat(e.profile.aboutMe)}),Object(d.jsx)("p",{children:"My Facebook -- ".concat(e.profile.contacts.facebook)})]})]}):Object(d.jsx)(Ve,{})};function gt(e){return Object(d.jsxs)("div",{className:Ze.a.main,children:[Object(d.jsx)(bt,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(d.jsx)(nt,{}),Object(d.jsx)(ot,{})]})}var Ot=Object(g.d)(Object(Me.b)((function(e){return{profile:e.mainPage.profile,status:e.mainPage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(t){C(e).then((function(e){var n;t((n=e.data,{type:k,profile:n}))}))}},getUserStatus:function(e){return function(t){y(e).then((function(e){t(L(e.data))}))}},updateStatus:function(e){return function(t){A(e).then((function(n){0===n.data.resultCode&&t(L(e))}))}}}),de.f,De)((function(e){return Object(a.useEffect)((function(){var t=e.match.params.userId;t||(t=e.authorizedUserId),e.getUserProfile(t),e.getUserStatus(t)}),[]),Object(d.jsx)(gt,Object(f.a)(Object(f.a)({},e),{},{profile:e.profile,status:e.status,updateStatus:e.updateStatus}))})),ft=n(48),ht=n.n(ft),pt=n.p+"static/media/logo22.f9da70ae.png";function mt(e){return Object(d.jsxs)("div",{className:ht.a.head,children:[Object(d.jsx)("img",{alt:"logo",src:pt}),Object(d.jsx)("div",{className:ht.a.loginBlock,children:e.isAuth?Object(d.jsxs)("div",{children:[e.login," - ",Object(d.jsx)("button",{className:ht.a.button,onClick:e.logout,children:"Log out"})]}):Object(d.jsx)(u.b,{className:ht.a.login,to:"/login",children:"Login"})})]})}var xt=Object(Me.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthUser:te,logout:function(){return function(e){w().then((function(t){0===t.data.resultCode&&e(ee(null,null,null,!1))}))}}})((function(e){return Object(a.useEffect)((function(){e.getAuthUser()}),[]),Object(d.jsx)(mt,Object(f.a)({},e))})),vt=Object(_e.a)({form:"login"})((function(e){return Object(d.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(d.jsx)("div",{children:Object(d.jsx)(ve.a,{name:"email",placeholder:"Email",component:ke,validate:[Ee]})}),Object(d.jsx)("div",{children:Object(d.jsx)(ve.a,{name:"password",placeholder:"Password",component:ke,validate:[Ee],type:"password"})}),Object(d.jsxs)("div",{children:[Object(d.jsx)(ve.a,{name:"rememberMe",component:ke,type:"checkbox"}),"remember me"]}),e.error&&Object(d.jsx)("div",{className:Se.a.formSummaryError,children:e.error}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{children:"Login"})})]})})),_t=Object(Me.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(a){P(e,t,n).then((function(e){if(0===e.data.resultCode)a(te());else{var t=e.data.messages.length>0?e.data.messages[0]:"Error!";a(Object(Z.a)("login",{_error:t}))}}))}}})((function(e){return e.isAuth?Object(d.jsx)(de.a,{to:"/profile"}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsx)(vt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]})}));function Pt(){return Object(d.jsx)(u.a,{children:Object(d.jsxs)("div",{className:je.a.body,children:[Object(d.jsx)(xt,{}),Object(d.jsx)(ue,{}),Object(d.jsxs)("div",{className:je.a.appContent,children:[Object(d.jsx)(de.b,{path:"/profile/:userId?",render:function(){return Object(d.jsx)(Ot,{})}}),Object(d.jsx)(de.b,{path:"/dialogs",render:function(){return Object(d.jsx)(Be,{})}}),Object(d.jsx)(de.b,{path:"/users",render:function(){return Object(d.jsx)(Xe,{})}}),Object(d.jsx)(de.b,{path:"/news",render:function(){return Object(d.jsx)(be,{})}}),Object(d.jsx)(de.b,{path:"/music",render:function(){return Object(d.jsx)(ge,{})}}),Object(d.jsx)(de.b,{path:"/settings",render:function(){return Object(d.jsx)(Oe,{})}}),Object(d.jsx)(de.b,{path:"/login",render:function(){return Object(d.jsx)(_t,{})}})]})]})})}i.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(Me.a,{store:ce,children:Object(d.jsx)(Pt,{})})}),document.getElementById("root"))},46:function(e,t,n){e.exports={formControl:"FormsControls_formControl__12gEQ",error:"FormsControls_error__3kbCe",formSummaryError:"FormsControls_formSummaryError__3A6Da"}},48:function(e,t,n){e.exports={head:"Header_head__2CzXq",loginBlock:"Header_loginBlock__1KDtM",button:"Header_button__TXPk4",login:"Header_login__2oNHV"}},83:function(e,t,n){e.exports={body:"App_body__HR1Il",appContent:"App_appContent__1y-tW"}},86:function(e,t,n){e.exports={preloader:"Preloader_preloader__ZpvxC",container:"Preloader_container__1OlaA"}}},[[284,1,2]]]);
//# sourceMappingURL=main.a430c5be.chunk.js.map