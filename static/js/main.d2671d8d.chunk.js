(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{131:function(e,t,n){e.exports={main:"Profile_main__1qsdO"}},132:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__V31r5"}},133:function(e,t,n){e.exports={myPost:"MyPost_myPost__1dhdr"}},134:function(e,t,n){e.exports={post:"Post_post__2cboB"}},26:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__1cSUP",dialogsItems:"Dialogs_dialogsItems__3EB1M",dialog:"Dialogs_dialog__2jZZM",messages:"Dialogs_messages__2y9HZ",message:"Dialogs_message__3lXIR",container:"Dialogs_container__2mO4q"}},27:function(e,t,n){e.exports={formControl:"FormsControls_formControl__sCSDD",error:"FormsControls_error__3ldnx",formSummaryError:"FormsControls_formSummaryError__1TNCq",checkbox:"FormsControls_checkbox__2tik5",buttonEditMode:"FormsControls_buttonEditMode__2SOp0"}},288:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(63),s=n.n(a),c=n(41),i=n.n(c),o=n(15),u=n(0);function l(){return Object(u.jsx)("div",{className:i.a.page,children:Object(u.jsxs)("ul",{className:i.a.ul,children:[Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{activeClassName:i.a.active,to:"/profile",children:"Profile"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{activeClassName:i.a.active,to:"/dialogs",children:"Messages"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.b,{activeClassName:i.a.active,to:"/users",children:"Users"})})]})})}var d=n(87),j=n.n(d),b=n(11),f=n(40),p=n(3),O="dialogsReducer/SEND_MESSAGE",h={dialogsData:[{id:1,name:"Bob"},{id:2,name:"Alex"},{id:3,name:"Lili"},{id:4,name:"Smitty"},{id:5,name:"Nic"}],messageData:[{id:1,message:"Hi!"},{id:2,message:"How are you"},{id:3,message:"Thanks"},{id:4,message:"i am fine"},{id:5,message:"Yo"}]},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:var n=t.newMessageBody;return Object(p.a)(Object(p.a)({},e),{},{messageData:[].concat(Object(f.a)(e.messageData),[{id:6,message:n}])});default:return e}},m=n(26),x=n.n(m);function v(e){return Object(u.jsx)("div",{className:x.a.dialog,children:Object(u.jsx)(o.b,{to:"/dialogs/"+e.id,children:e.name})})}function _(e){return Object(u.jsx)("div",{className:x.a.message,children:e.message})}var P=n(104),w=n(123),C=n(124),S=n(69),y=n(27),N=n.n(y),U=["input","meta"],E=["input"],I=["input"],M=function(e){e.input;var t=e.meta,n=Object(S.a)(e,U),r=t.touched&&t.error;return Object(u.jsxs)("div",{className:N.a.formControl+" "+(r&&N.a.error),children:[Object(u.jsx)("div",{children:n.children}),r&&Object(u.jsx)("span",{children:t.error})]})},k=function(e){var t=e.input,n=Object(S.a)(e,E);return Object(u.jsx)(M,Object(p.a)(Object(p.a)({},e),{},{children:Object(u.jsx)("textarea",Object(p.a)(Object(p.a)({},t),n))}))},A=function(e){var t=e.input,n=Object(S.a)(e,I);return Object(u.jsx)(M,Object(p.a)(Object(p.a)({},e),{},{children:Object(u.jsx)("input",Object(p.a)(Object(p.a)({},t),n))}))},F=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(u.jsxs)("div",{children:[Object(u.jsx)(w.a,Object(p.a)({placeholder:e,name:t,validate:n,component:r},a))," ",s]})},T=function(e){if(!e)return"Field is required"},D=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbol")}},L=D(20),R=Object(C.a)({form:"addMessage"})((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:"Message"}),Object(u.jsxs)(P.a,{onSubmit:e.handleSubmit,children:[Object(u.jsx)("div",{children:Object(u.jsx)(w.a,{name:"addMessage",component:k,placeholder:"New Message",validate:[T,L]})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{children:"Add message"})})]})]})}));var z=n(10),B=function(e){return{isAuth:e.auth.isAuth}},H=function(e){return Object(z.b)(B)((function(t){return t.isAuth?Object(u.jsx)(e,Object(p.a)({},t)):Object(u.jsx)(b.a,{to:"/login"})}))},G=n(8),q=Object(G.d)(Object(z.b)((function(e){return{state:e}}),(function(e){return{onSendMessageClick:function(t){e(function(e){return{type:O,newMessageBody:e}}(t))}}})),H)((function(e){var t=e.state.messagePage.dialogsData.map((function(e){return Object(u.jsx)(v,{name:e.name,id:e.id},e.id)})),n=e.state.messagePage.messageData.map((function(e){return Object(u.jsx)(_,{message:e.message,id:e.id},e.id)}));return e.isAuth?Object(u.jsxs)("div",{className:x.a.container,children:[Object(u.jsxs)("div",{className:x.a.dialogs,children:[Object(u.jsx)("div",{className:x.a.dialogsItems,children:t}),Object(u.jsx)("div",{className:x.a.messages,children:n})]}),Object(u.jsx)(R,{onSubmit:function(t){e.onSendMessageClick(t.addMessage)}})]}):Object(u.jsx)(b.a,{to:"/login"})})),V=n(90),J=n.n(V),Z=n.p+"static/media/no_image_user.5604c8dc.jpg",K=n(42),Y=n.n(K),Q=n(129),W=n.n(Q),X=function(e){return Object(u.jsx)(W.a,{breakLabel:"...",nextLabel:">",onPageChange:e.handlePageClick,pageRangeDisplayed:5,pageCount:e.pageCount,previousLabel:"<",renderOnZeroPageCount:null,containerClassName:Y.a.paginate,pageClassName:Y.a.paginateLi,activeClassName:Y.a.paginateLiActive,previousClassName:Y.a.paginateLiPrevious,nextClassName:Y.a.paginateLiNext})},$=function(e){var t=Math.ceil(e.totalUsersCount/e.pageSize);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:J.a.users,children:e.users.map((function(t){return Object(u.jsxs)("div",{className:J.a.card,children:[Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:Object(u.jsx)(o.b,{to:"/profile/"+t.id,children:Object(u.jsx)("img",{width:"70px",alt:"image",src:null!=t.photos.small?t.photos.small:Z})})}),Object(u.jsx)("div",{children:t.followed?Object(u.jsx)("button",{disabled:e.followingInProgress,onClick:function(){e.unFollow(t.id)},children:"Unfollow"}):Object(u.jsx)("button",{disabled:e.followingInProgress,onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(u.jsx)("span",{children:Object(u.jsxs)("span",{children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("b",{children:t.name})]}),Object(u.jsxs)("div",{children:["status: ",Object(u.jsx)("b",{children:t.status})]})]})})]},t.id)}))}),Object(u.jsx)(X,{handlePageClick:function(t){var n=t.selected;e.onPageChange(n+1)},pageCount:t})]})},ee=n(9),te=n.n(ee),ne=n(16),re=n(130).create({withCredentials:!0,headers:{"API-KEY":"738a7b98-0701-4aab-b063-c2ec324fb243"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),ae=function(e,t){return re.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},se=function(){return re.get("auth/me").then((function(e){return e.data}))},ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return re.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},ie=function(){return re.delete("auth/login")},oe={getFollow:function(e){return re.post("follow/".concat(e),{}).then((function(e){return e.data}))},getUnFollow:function(e){return re.delete("follow/".concat(e)).then((function(e){return e.data}))},getStatusFollow:function(e){return re.get("follow/".concat(e))}},ue=function(e){return re.get("profile/".concat(e))},le=function(e){return re.get("profile/status/".concat(e))},de=function(e){return re.put("profile/status",{status:e})},je=function(e){var t=new FormData;return t.append("image",e),re.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},be=function(e){return re.put("profile",e)},fe=function(){return re.get("security/get-captcha-url")},pe=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(p.a)(Object(p.a)({},e),r):e}))},Oe="usersReducer/FOLLOW",he="usersReducer/UN_FOLLOW",ge="usersReducer/SET_USERS",me="usersReducer/SET_CURRENT_PAGE",xe="usersReducer/SET_TOTAL_USERS_COUNT",ve="usersReducer/TOGGLE_IS_FETCHING",_e="usersReducer/TOGGLE_IS_FOLLOWING_PROGRESS",Pe={users:[],pageSize:12,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:!1},we=function(e){return{type:Oe,userId:e}},Ce=function(e){return{type:he,userId:e}},Se=function(e){return{type:ve,isFetching:e}},ye=function(e){return{type:_e,isFetching:e}},Ne=function(){var e=Object(ne.a)(te.a.mark((function e(t,n,r,a){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ye(!0)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(a(n)),t(ye(!1));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Object(p.a)(Object(p.a)({},e),{},{users:pe(e.users,t.userId,"id",{followed:!0})});case he:return Object(p.a)(Object(p.a)({},e),{},{users:pe(e.users,t.userId,"id",{followed:!1})});case ge:return Object(p.a)(Object(p.a)({},e),{},{users:Object(f.a)(t.users)});case me:return Object(p.a)(Object(p.a)({},e),{},{currentPage:t.currentPage});case xe:return Object(p.a)(Object(p.a)({},e),{},{totalUsersCount:t.totalUsersCount});case ve:return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case _e:return Object(p.a)(Object(p.a)({},e),{},{followingInProgress:t.isFetching});default:return e}},Ee=n.p+"static/media/loading.a1a99674.gif",Ie=n(91),Me=n.n(Ie),ke=function(){return Object(u.jsx)("div",{className:Me.a.container,children:Object(u.jsx)("img",{className:Me.a.preloader,src:Ee,alt:"preloader"})})},Ae=n(14),Fe=Object(Ae.a)((function(e){return e.usersPage.users}),(function(e){return e})),Te=Object(Ae.a)((function(e){return e.usersPage.pageSize}),(function(e){return e})),De=Object(Ae.a)((function(e){return e.usersPage.totalUsersCount}),(function(e){return e})),Le=Object(Ae.a)((function(e){return e.usersPage.currentPage}),(function(e){return e})),Re=Object(Ae.a)((function(e){return e.usersPage.isFetching}),(function(e){return e})),ze=Object(Ae.a)((function(e){return e.usersPage.followingInProgress}),(function(e){return e})),Be=Object(G.d)(Object(z.b)((function(e){return{users:Fe(e),pageSize:Te(e),totalUsersCount:De(e),currentPage:Le(e),isFetching:Re(e),followingInProgress:ze(e)}}),{follow:function(e){return function(t){Ne(t,e,oe.getFollow.bind(oe),we)}},unFollow:function(e){return function(t){Ne(t,e,oe.getUnFollow.bind(oe),Ce)}},setCurrentPage:function(e){return{type:me,currentPage:e}},toggleIsFollowingProgress:ye,requestUsers:function(e,t){return function(){var n=Object(ne.a)(te.a.mark((function n(r){var a;return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Se(!0)),n.next=3,ae(e,t);case 3:a=n.sent,r(Se(!1)),r((c=a.items,{type:ge,users:c})),r((s=a.totalCount,{type:xe,totalUsersCount:s}));case 7:case"end":return n.stop()}var s,c}),n)})));return function(e){return n.apply(this,arguments)}}()}}))((function(e){Object(r.useEffect)((function(){e.requestUsers(e.currentPage,e.pageSize)}),[]);return Object(u.jsxs)(u.Fragment,{children:[e.isFetching?Object(u.jsx)(ke,{}):null,Object(u.jsx)($,{users:e.users,unFollow:e.unFollow,follow:e.follow,totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,onPageChange:function(t){e.requestUsers(t,e.pageSize)},currentPage:e.currentPage,followingInProgress:e.followingInProgress})]})})),He=n(131),Ge=n.n(He),qe=n(24),Ve="profileReducer/ADD_POST",Je="profileReducer/SET_USER_PROFILE",Ze="profileReducer/SET_STATUS",Ke="profileReducer/DELETE_POST",Ye="profileReducer/SAVE_PHOTO_SUCCESS",Qe="profileReducer/EDIT_MODULE",We={postData:[{id:1,message:"Hi"},{id:2,message:"Hello"},{id:3,message:"Thanks"},{id:4,message:"Yo"}],newPostText:"React",profile:null,status:"",editModule:!1},Xe=function(e){return{type:Ze,status:e}},$e=function(e){return{type:Qe,editModule:e}},et=function(e){return function(){var t=Object(ne.a)(te.a.mark((function t(n){var r;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue(e);case 2:r=t.sent,n((a=r.data,{type:Je,profile:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:var n={id:5,message:t.newPostText};return Object(p.a)(Object(p.a)({},t),{},{postData:[].concat(Object(f.a)(e.postData),[n])});case Je:return Object(p.a)(Object(p.a)({},e),{},{profile:t.profile});case Ze:return Object(p.a)(Object(p.a)({},e),{},{status:t.status});case Ke:return Object(p.a)(Object(p.a)({},e),{},{postData:e.postData.filter((function(e){return e.id!==t.postId}))});case Ye:return Object(p.a)(Object(p.a)({},e),{},{profile:Object(p.a)(Object(p.a)({},e.profile),{},{photos:t.photos})});case Qe:return Object(p.a)(Object(p.a)({},e),{},{editModule:t.editModule});default:return e}},nt=n(132),rt=n.n(nt),at=D(10),st=Object(C.a)({form:"newMessage"})((function(e){return Object(u.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(u.jsx)("div",{children:Object(u.jsx)(w.a,{name:"newMessage",component:k,placeholder:"New Post",validate:[T,at]})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{children:"Add post"})})]})}));var ct=Object(Ae.a)((function(e){return e.mainPage.profile}),(function(e){return e})),it=Object(Ae.a)((function(e){return e.mainPage.status}),(function(e){return e})),ot=Object(Ae.a)((function(e){return e.mainPage.postData}),(function(e){return e})),ut=Object(Ae.a)((function(e){return e.mainPage.newPostText}),(function(e){return e})),lt=Object(Ae.a)((function(e){return e.mainPage.editModule}),(function(e){return e})),dt=Object(z.b)((function(e){return{newPostText:ut(e)}}),(function(e){return{onAddPost:function(t){e(function(e){return{type:Ve,newPostText:e}}(t))}}}))((function(e){return Object(u.jsxs)("div",{className:rt.a.descriptionBlock,children:[Object(u.jsx)("h3",{children:"My post"}),Object(u.jsx)(st,{onSubmit:function(t){e.onAddPost(t.newMessage)}})]})})),jt=n(133),bt=n.n(jt),ft=n(134),pt=n.n(ft);function Ot(e){return Object(u.jsxs)("div",{className:pt.a.post,children:[Object(u.jsx)("img",{alt:"avatar",src:"https://klike.net/uploads/posts/2019-03/1551511801_1.jpg"}),e.message]})}var ht=Object(z.b)((function(e){return{postData:ot(e)}}))((function(e){var t=e.postData.map((function(e){return Object(u.jsx)(Ot,{message:e.message},e.id)}));return Object(u.jsx)("div",{className:bt.a.myPost,children:t})})),gt=n(32),mt=n.n(gt),xt=n(92),vt=function(e){var t=Object(r.useState)(!0),n=Object(xt.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(e.status),i=Object(xt.a)(c,2),o=i[0],l=i[1];Object(r.useEffect)((function(){l(e.status)}),[e.status]);return Object(u.jsx)("div",{className:mt.a.status,children:e.authorizedUserId===e.profileId?a?Object(u.jsx)("span",{onDoubleClick:function(){s(!1)},children:e.status}):Object(u.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!0),e.updateStatus(o)},value:o}):e.status})},_t=Object(C.a)({form:"editProfile"})((function(e){var t=e.handleSubmit,n=e.initialValues,r=e.error;return Object(u.jsxs)("form",{onSubmit:t,children:[r&&Object(u.jsx)("div",{className:N.a.formSummaryError,children:r}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Name:"}),F("Full name","fullName",[],A)]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"About Me:"}),F("About Me","aboutMe",[],k)]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Looking for a job:"}),F("","lookingForAJob",[],A,{type:"checkbox"})," "]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"My professional skills:"}),F("My professional skills","lookingForAJobDescription",[],k)," "]})}),Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Contacts:"})," ",Object.keys(n.contacts).map((function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)("b",{children:[e,": ",F(e,"contacts."+e,[],A)]})},e)}))]}),Object(u.jsx)("div",{className:N.a.buttonEditMode,children:Object(u.jsx)("button",{children:"save"})})]})})),Pt=function(e){var t=e.profile,n=e.isOwner,r=e.goToEditMode;return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsxs)("h3",{children:["Name: ",t.fullName]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"About Me:"})," ",t.aboutMe]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Looking for a job:"})," ",t.lookingForAJob?"Yes":"No"," "]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"My professional skills:"})," ",t.lookingForAJobDescription," "]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Contacts:"})," ",Object.keys(t.contacts).map((function(e){if(null!=t.contacts[e]&&""!==t.contacts[e])return Object(u.jsx)(wt,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})}),Object(u.jsx)("div",{className:mt.a.buttonEditMode,children:n&&Object(u.jsx)("button",{onClick:r,children:"Edit"})})]})},wt=function(e){var t=e.contactTitle,n=e.contactValue;return Object(u.jsxs)("div",{className:mt.a.contacts,children:[t,": ",n]})},Ct=function(e){if(!e.profile)return Object(u.jsx)(ke,{});var t=Object(r.useRef)(null);return Object(u.jsxs)("div",{className:mt.a.container,children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:e.isOwner&&mt.a.addPhoto,children:[Object(u.jsx)("img",{onClick:function(){e.isOwner&&t.current.click()},alt:"image",className:mt.a.userImage,src:null!=e.profile.photos.large?e.profile.photos.large:Z}),e.isOwner&&Object(u.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])},ref:t,style:{display:"none"}})]}),Object(u.jsx)(vt,{status:e.status,updateStatus:e.updateStatus,authorizedUserId:e.authorizedUserId,profileId:e.profile.userId})]}),e.editModule?Object(u.jsx)(_t,{initialValues:e.profile,onSubmit:function(t){e.saveProfile(t)}}):Object(u.jsx)(Pt,{profile:e.profile,goToEditMode:function(){return e.setEditModule(!0)},isOwner:e.isOwner})]})};function St(e){return Object(u.jsxs)("div",{className:Ge.a.main,children:[Object(u.jsx)(Ct,{setEditModule:e.setEditModule,editModule:e.editModule,profile:e.profile,status:e.status,updateStatus:e.updateStatus,authorizedUserId:e.authorizedUserId,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),Object(u.jsx)(dt,{}),Object(u.jsx)(ht,{})]})}var yt=Object(Ae.a)((function(e){return e.auth.isAuth}),(function(e){return e})),Nt=Object(Ae.a)((function(e){return e.auth.login}),(function(e){return e})),Ut=Object(Ae.a)((function(e){return e.auth.userId}),(function(e){return e})),Et=Object(Ae.a)((function(e){return e.auth.captchaUra}),(function(e){return e})),It=Object(G.d)(Object(z.b)((function(e){return{profile:ct(e),status:it(e),authorizedUserId:Ut(e),isAuth:yt(e),editModule:lt(e)}}),{getUserProfile:et,getUserStatus:function(e){return function(){var t=Object(ne.a)(te.a.mark((function t(n){var r;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le(e);case 2:r=t.sent,n(Xe(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(ne.a)(te.a.mark((function t(n){return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de(e);case 2:0===t.sent.data.resultCode&&n(Xe(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(ne.a)(te.a.mark((function t(n){var r;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je(e);case 2:0===(r=t.sent).data.resultCode&&n((a=r.data.data.photos,{type:Ye,photos:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(ne.a)(te.a.mark((function t(n,r){var a,s;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.userId,t.next=3,be(e);case 3:0===(s=t.sent).data.resultCode?(n(et(a)),n($e(!1))):n(Object(qe.a)("editProfile",{_error:s.data.messages[0]}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},setEditModule:$e}),b.f,H)((function(e){return Object(r.useEffect)((function(){var t=e.match.params.userId;t||(t=e.authorizedUserId),e.getUserProfile(t),e.getUserStatus(t)}),[e.match.params.userId]),Object(u.jsx)(St,Object(p.a)(Object(p.a)({},e),{},{profile:e.profile,status:e.status,updateStatus:e.updateStatus,authorizedUserId:e.authorizedUserId,isOwner:!e.match.params.userId,savePhoto:e.savePhoto,editModule:e.editModule,setEditModule:e.setEditModule}))})),Mt=n(52),kt=n.n(Mt),At=n.p+"static/media/logo22.f9da70ae.png";function Ft(e){return Object(u.jsxs)("div",{className:kt.a.head,children:[Object(u.jsx)("img",{alt:"logo",src:At}),Object(u.jsx)("div",{className:kt.a.loginBlock,children:e.isAuth?Object(u.jsxs)("div",{children:[e.login," - ",Object(u.jsx)("button",{className:kt.a.button,onClick:e.logout,children:"Log out"})]}):Object(u.jsx)(o.b,{className:kt.a.login,to:"/login",children:"Login"})})]})}var Tt="authReducer/SET_USER_DATA",Dt="authReducer/GET_CAPTCHA_URL_SUCCESS",Lt={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},Rt=function(e,t,n,r){return{type:Tt,payload:{userId:e,email:t,login:n,isAuth:r}}},zt=function(){return function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,r,a,s,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,s=r.login,c=r.email,t(Rt(a,c,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Tt:case Dt:return Object(p.a)(Object(p.a)({},e),t.payload);default:return e}},Ht=Object(z.b)((function(e){return{isAuth:yt(e),login:Nt(e)}}),{logout:function(){return function(){var e=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:0===e.sent.data.resultCode&&t(Rt(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return Object(u.jsx)(Ft,Object(p.a)({},e))})),Gt=Object(C.a)({form:"login"})((function(e){return Object(u.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(u.jsx)("div",{children:Object(u.jsx)(w.a,{name:"email",placeholder:"Email",component:A,validate:[T]})}),Object(u.jsx)("div",{children:Object(u.jsx)(w.a,{name:"password",placeholder:"Password",component:A,validate:[T],type:"password"})}),Object(u.jsxs)("div",{className:N.a.checkbox,children:[Object(u.jsx)(w.a,{name:"rememberMe",component:A,type:"checkbox"}),"remember me"]}),e.captchaUrl&&Object(u.jsx)("img",{alt:"captcha",src:e.captchaUrl}),e.captchaUrl&&Object(u.jsx)("div",{children:Object(u.jsx)(w.a,{name:"captcha",placeholder:"Symbol from image",component:A,validate:[T],type:[]})}),e.error&&Object(u.jsx)("div",{className:N.a.formSummaryError,children:e.error}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{children:"Login"})})]})})),qt=Object(z.b)((function(e){return{isAuth:yt(e),captchaUrl:Et(e)}}),{login:function(e,t,n,r){return function(){var a=Object(ne.a)(te.a.mark((function a(s){var c,i;return te.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ce(e,t,n,r);case 2:0===(c=a.sent).data.resultCode?s(zt()):(10===c.data.resultCode&&s(function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:n=e.sent,r=n.data.url,t({type:Dt,payload:{captchaUra:r}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=c.data.messages.length>0?c.data.messages[0]:"Error!",s(Object(qe.a)("login",{_error:i})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(u.jsx)(b.a,{to:"/profile"}):Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Login"}),Object(u.jsx)(Gt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl})]})})),Vt="appReducer/INITIALIZED_SUCCESS",Jt={initialized:!1},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Vt:return Object(p.a)(Object(p.a)({},e),{},{initialized:!0});default:return e}},Kt=Object(G.d)(b.f,Object(z.b)((function(e){return{initialized:e.app.initialized}}),{initializedApp:function(){return function(e){e(zt()).then((function(){e({type:Vt})}))}}}))((function(e){return Object(r.useEffect)((function(){e.initializedApp()}),[]),e.initialized?Object(u.jsxs)("div",{className:j.a.body,children:[Object(u.jsx)(Ht,{}),Object(u.jsx)(l,{}),Object(u.jsxs)("div",{className:j.a.appContent,children:[Object(u.jsx)(b.b,{exact:!0,path:"/",render:function(){return Object(u.jsx)(b.a,{to:"/profile"})}}),Object(u.jsx)(b.b,{path:"/profile/:userId?",render:function(){return Object(u.jsx)(It,{})}}),Object(u.jsx)(b.b,{path:"/dialogs",render:function(){return Object(u.jsx)(q,{})}}),Object(u.jsx)(b.b,{path:"/users",render:function(){return Object(u.jsx)(Be,{})}}),Object(u.jsx)(b.b,{path:"/login",render:function(){return Object(u.jsx)(qt,{})}})]})]}):Object(u.jsx)(ke,{})})),Yt=n(135),Qt=n(125),Wt=Object(G.c)({messagePage:g,mainPage:tt,usersPage:Ue,auth:Bt,form:Qt.a,app:Zt}),Xt=Object(G.e)(Wt,Object(G.a)(Yt.a));window.store=Xt;var $t=Xt;s.a.render(Object(u.jsx)(z.a,{store:$t,children:Object(u.jsx)(o.a,{children:Object(u.jsx)(Kt,{})})}),document.getElementById("root"))},32:function(e,t,n){e.exports={container:"ProfileUser_container__35wYP",userImage:"ProfileUser_userImage__3Qb3K",addPhoto:"ProfileUser_addPhoto__1VIiZ",status:"ProfileUser_status__1uDva",buttonEditMode:"ProfileUser_buttonEditMode__biEqQ",contacts:"ProfileUser_contacts__lTBxU"}},41:function(e,t,n){e.exports={page:"Nav_page__yir0w",ul:"Nav_ul__39qPa",active:"Nav_active__eKCCn"}},42:function(e,t,n){e.exports={paginate:"Paginate_paginate__1JqVv",paginateLi:"Paginate_paginateLi__vZ1AS",paginateLiActive:"Paginate_paginateLiActive__3yCVN",paginateLiPrevious:"Paginate_paginateLiPrevious__2s-nf",paginateLiNext:"Paginate_paginateLiNext__1c1gN"}},52:function(e,t,n){e.exports={head:"Header_head__2jO5r",loginBlock:"Header_loginBlock__2eQlu",button:"Header_button__1tXpI",login:"Header_login__7C0VA"}},87:function(e,t,n){e.exports={body:"App_body__kGstK",appContent:"App_appContent__2j9c0"}},90:function(e,t,n){e.exports={users:"Users_users__2H6OU",card:"Users_card__21F7z",selectedPage:"Users_selectedPage__34K9g"}},91:function(e,t,n){e.exports={preloader:"Preloader_preloader__2I0Qy",container:"Preloader_container__3sTDw"}}},[[288,1,2]]]);
//# sourceMappingURL=main.d2671d8d.chunk.js.map